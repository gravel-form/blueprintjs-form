{"version":3,"file":"static/webpack/static/development/pages/dynamic-array.js.e3b2ed4e8332e3937733.hot-update.js","sources":["webpack:///./pages/dynamic-array.tsx"],"sourcesContent":["import * as React from 'react';\nimport Layout from '../layouts/main';\nimport { NextPage } from 'next';\nimport DemoForm from '../components/DemoForm';\n\nconst code = `const _ = Lodash;\nconst { Row, Col } = ReactGridSystem;\nconst { Button } = BlueprintjsCore\nconst ExampleDynamicArrayMw = (props) => {\n  const {\n    schema,\n    data,\n    next,\n    MiddlewareComponent,\n    schemaPath,\n    dataPath,\n    formProps,\n    onChange,\n    extraProps,\n    errors,\n    onSubmit,\n  } = props;\n\n  if (typeof schema === 'boolean' || schema.type !== 'array' || !schema.items || Array.isArray(schema.items))\n    return next(props);\n\n  const schemaItems = schema.items;\n  const dataItems = Array.isArray(data) ? data : [];\n\n  return (\n    <>\n      {dataItems.map((item, index) => {\n        return (\n          <Row key={index}>\n            <Col xs={10}>\n              <MiddlewareComponent\n                key={index}\n                schema={schemaItems}\n                data={item}\n                onChange={(newItem) =>\n                  onChange([...dataItems.slice(0, index), newItem, ...dataItems.slice(index + 1)])\n                }\n                parent={props}\n                schemaPath={[...schemaPath, 'items']}\n                dataPath={[...dataPath, index]}\n                next={() => null}\n                formProps={formProps}\n                MiddlewareComponent={MiddlewareComponent}\n                {...{ extraProps: _.get(extraProps, 'items'), errors, onSubmit }}\n              />\n            </Col>\n            <Col xs={2}>\n              <Button style={{float:'right'}} onClick={(e) => {\n                e.preventDefault();\n                onChange(dataItems.filter((_, i) => i !== index))\n              }}>X</Button>\n            </Col>\n          </Row>\n        );\n      })}\n      {\n        <Row>\n          <Button type=\"dashed\" onClick={() => onChange([...dataItems, {}])} style={{ width: '100%' }}>\n            + Add field\n          </Button>\n        </Row>\n      }\n    </>\n  );\n};\n\nconst schema = {\n  title: 'A simple dynamic array form',\n  type: 'array',\n  items: {\n    type: 'object',\n    properties: {\n      firstName: {\n        type: 'string',\n        title: 'First name',\n      },\n      lastName: {\n        type: 'string',\n        title: 'Last name',\n      },\n    },\n  },\n};\n\nconst middlewares = [\n  FormDataViewerMw,\n  ExtraPropsMw,\n  FieldsetTemplateMw,\n  ExampleDynamicArrayMw,\n  FormItemTemplateMw,\n  ...schemaMws,\n  InputMw,\n  NotSupportedMw,\n];\n\nrender(\n  <Form\n    defaultData={[\n      { firstName: 'Jhon', lastName: 'Smith' },\n    ]}\n    schema={schema}\n    middlewares={middlewares}\n  />\n);\n`;\n\nconst IndexPage: NextPage = () => {\n  return (\n    <Layout>\n      <DemoForm code={code} />\n    </Layout>\n  );\n};\n\nexport default IndexPage;\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAEA;AACA;AAyGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;;;;A","sourceRoot":""}